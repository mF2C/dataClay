ARG DATACLAY_JDK
FROM bscdataclay/logicmodule:trunk-${DATACLAY_JDK}
MAINTAINER dataClay team <support-dataclay@bsc.es>

COPY ./LM.sqlite /tmp/dataclay/dump.sql
RUN sqlite3 "/tmp/dataclay/LM" ".read /tmp/dataclay/dump.sql"

# The command can contain additional options for the Java Virtual Machine and
# must contain a class to be executed.
ENTRYPOINT ["java", "-cp", "dataclay.jar:lib/*", "-Dlog4j.configurationFile=/usr/src/dataclay/log4j2.xml", "dataclay.logic.server.LogicModuleSrv"]
# Don't use CMD in order to keep compatibility with singularity container's generator
